---
sidebar_position: 1
title: Install Guide

---

## Requirements

* [Go 1.6+](https://go.dev)
* [Node.js LTS (16 or 14)](https://nodejs.org)
* [Yarn 1.x](https://yarnpkg.com)

## Download

The source code of Casdoor is hosted at GitHub: https://github.com/casbin/casdoor . Both the Go backend code and React frontend code are inside the single repository.

Casdoor supports `Go Modules`. To download the code, you can just clone the code into any directory:

```shell
cd path/to/folder
git clone https://github.com/casbin/casdoor
```

## Configure

All configures are placed in `conf/`, including `app.conf` and `oss.conf`. The former stores application-related information, while the latter only stores OSS-related configuration. You can modify two files to set all configures.

But for the first time of use, you donâ€™t need to figure out everything, which will be introduced later. Now you just need a few simple configures to run casdoor on your personal computer.

Nevertheless, the database info should be configured first (unless you choose to use the special image casbin/casdoor-all-in-one which is specially for new users to have a trial. See Chapter Run/Docker for details)

Casdoor uses [XORM](https://xorm.io/) framework to connect to DB, so all DBs supported by XORM can also be used.

- Setup database (MySQL):

  Casdoor will store its users, nodes and topics information in a MySQL database named: `casdoor`, will create it if not existed. The DB connection string can be specified at: https://github.com/casbin/casdoor/blob/master/conf/app.conf

  ```ini
  driverName = mysql
  dataSourceName = root:123456@tcp(localhost:3306)/
  dbName = casdoor
  ```

- Setup database (Postgres):

  Since we must choose a database when opening Postgres with xorm, you should prepare a database manually before running Casdoor. 

  Let's assume that you have already prepared a database called `casdoor`, then you should specify `app.conf` like this:

  ```ini
  driverName = postgres
  dataSourceName = "user=postgres password=xxx sslmode=disable dbname="
  dbName = casdoor
  ```

  **Please notice:** You can add Postgres parameters in `dataSourceName`, but please make sure that `dataSourceName` ends with `dbname=`. Or database adapter may crash when you launch Casdoor.

- Other database...

## Run

There are currently two methods to start, you can choose one according to your own situation.

### Manually

According to actual needs, it is divided into `dev` mode and `prod` mode

#### Dev Environment

After completing the above simple configuration steps, you can run Casdoor. Casdoor has a front-end back-end separation architecture. The frontend uses javascript and React, backend uses [beego](https://beego.me/) and xorm.

##### Backend

Casdoor's Go backend runs at port 8000 by default. You can start the Go backend with the following command:

```bash
go run main.go
```

After the server is successfully running, we can start the frontend part.

##### Frontend

Casdoor's React frontend runs at port 7001 by default. Casdoor uses [Yarn 1.x](https://classic.yarnpkg.com/lang/en/docs/install) as the official package manager. Open a new terminal and run:

```bash
cd web
yarn install
yarn start
```

:::caution

We strongly suggest you use [Yarn 1.x](https://classic.yarnpkg.com/lang/en/docs/install) to install Casdoor, using NPM might cause UI styling issues, see more details at: [casdoor#294](https://github.com/casbin/casdoor/issues/294)

:::

Open your favorite browser and visit **http://localhost:7001**, you will see the login page of Casdoor.

Input `admin` and `123` to test login functionality is working fine.

#### Production Deployment

### Frontend

Build static pages:

```bash
yarn build
```

### Backend

We build the Go backend code into an executable: **casdoor** and then start it:

```bash
go build && ./casdoor
```

Next, go to: **[http://localhost:8000](http://localhost:8000)** in your browser, if you can see login page of Casdoor, and you can login using `admin` and `123` as username and password, then everything is OK!

:::tip
To use another port, please edit ```conf/app.conf``` and modify `httpport`, then restart the Go backend.
:::

:::info casdoor port details

In **dev** environment, the frontend is run by ```yarn run``` in port 7001, so if you want to go to Casdoor login page, you need set Casdoor link as **http://localhost:7001**.

In **prod** environment, the frontend files is first built by ```yarn build``` and served in port 8000, so if you want to go to Casdoor login page, you need to set Casdoor link as **http://SERVER_IP:8000** (If you are using reverse proxy, you need to set the link as **your domain**).

#### Take our official forum Casnode as an example:

[Casnode](https://casnode.org) uses Casdoor to handle authentication.

When we are testing Casnode in **dev** environment, we set the `serverUrl` as http://localhost:7001, so when we test signin and signup functionality using Casdoor, it will go to localhost 7001 which is the Casdoor port.

And when we put Casnode to **prod** environment, we set the `serverUrl` as https://door.casbin.com, so users can signin or signup using Casdoor.

![Casnode Example](/img/casnodeexample.png)
:::

### Docker

Casdoor provide 2 kinds of image: 
- casbin/casdoor-all-in-one, in which casdoor binary, a mysql database and all necessary configurations are packed up. This image is for new user to have a trial on casdoor quickly. **With this image you can start a casdoor immediately with one single command (or two) without any complex configuration**. **Note: we DO NOT recommend you to use this image in productive environment**

- casbin/casdoor: normal & graceful casdoor image with only casdoor and environment installed. 

This method requires [docker](https://docs.docker.com/get-docker/) and [docker-compose](https://docs.docker.com/compose/install/) to be installed first.

### Start casdoor with casbin/casdoor-all-in-one
if the image is not pulled, pull it from dockerhub
```shell
docker pull casbin/casdoor-all-in-one
```
Start it with
```shell
docker run -p 8000:8000 casbin/casdoor-all-in-one
```
Now you can visit http://localhost:8000 and have a try. Default account and password is 'admin' and '123'. Go for it!

### Start casdoor with casbin/casdoor
#### modify the configurations
For the convenience of your first attempt, docker-compose.yml contains commands to start a database via docker.

Thus edit `conf/app.conf` to point out the location of database(db:3306), modify `dataSourceName` to the fixed content:

```bash
dataSourceName = root:123456@tcp(db:3306)/
```

> If you need to modify `conf/app.conf`, you need to re-run `docker-compose up`.

#### Run

```bash
docker-compose up
```
That's it! Try to visit http://localhost:8000/. :small_airplane:

:::tip
  When you start casdoor with casbin/casdoor image
  - `MySQL` and `Casdoor server` are in different docker containers.
  - After modifying `conf/app.conf`, re-execute `docker-compose up`

:::

## Some details

- Github corner

  We added a Github icon in the upper right corner, linking to your Github repository address.
  You could set `ShowGithubCorner` to hidden it.

  Configuration:

    ```javascript
  export const ShowGithubCorner = true
  
  export const GithubRepo = "https://github.com/casbin/casdoor" //your github repository
    ```

- OSS conf

  We use an OSS to store and provide user avatars. You must modify the file `conf/oss.conf` to tell the backend your OSS info. For OSS providers, we support Aliyun(`[aliyun]`), awss3(`[s3]`) now.

  ```conf
  [provider]
  accessId = id
  accessKey = key
  bucket = bucket
  endpoint = endpoint
  ```

  Please fill out this conf correctly, or the avatar server won't work!

- App conf

  `conf/app.conf` stores the important configuration of casdoor, which is very helpful for you to use Casdoor better.

  ```json
  appname = casdoor
  httpport = 8000
  runmode = dev
  SessionOn = true
  copyrequestbody = true
  driverName = mysql
  dataSourceName = root:123@tcp(localhost:3306)/
  dbName = casdoor
  authState = "casdoor"
  useProxy = false
  verificationCodeTimeout = 10
  ```

  - `appname` is the application name, which currently has no practical use
  - `httpport` is the port that your back-end application is listening on
  - `runmode` is `dev` or `prod`
  - `SessionOn` decides whether to enable session,used by default.
  - `driverName`, `dataSourceName` and `dbName` are introduced before, please see [Config](#config).
  - `useProxy` set the proxy port, because we have google-related services, which will be restricted by the network in some areas
  - `verificationCodeTimeout` set the expiration time of the verification code. After the expiration, the user needs to obtain it again

- If casdoor needs to be publicly accessible(possess public IP), also need to modify `web/src/auth/Auth.js`:

  ```javascript
  export let authConfig = {
    serverUrl: "http://example.com", // your Casdoor URL, like the official one: https://door.casbin.com, or http:1.1.1.1:8000
    ...
  }
  ```